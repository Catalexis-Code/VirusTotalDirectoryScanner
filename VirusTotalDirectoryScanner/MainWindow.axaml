<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="using:VirusTotalDirectoryScanner.Models"
        x:Class="VirusTotalDirectoryScanner.MainWindow"
        Title="VirusTotalDirectoryScanner"
        WindowStartupLocation="CenterScreen"
        Width="520"
        Height="600">
  <Grid Margin="16" RowDefinitions="Auto,Auto,*" RowSpacing="12">
    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="12">
      <TextBlock FontSize="20" FontWeight="SemiBold" Text="VirusTotalDirectoryScanner" />
      <Button Grid.Column="1" Content="Settings…" Click="OpenSettings_Click" />
    </Grid>

    <Separator Grid.Row="1" />

    <Grid Grid.Row="2" RowDefinitions="Auto, *">
      <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,10">
        <StackPanel Spacing="8">
          <TextBlock FontWeight="SemiBold" Text="Status" />
          <TextBlock x:Name="StatusText" Text="Loading configuration…" />
        </StackPanel>
        <Button Grid.Column="1" Content="Clear" Click="Clear_Click" VerticalAlignment="Bottom" />
      </Grid>

      <DataGrid Grid.Row="1" x:Name="FilesGrid" AutoGenerateColumns="False" IsReadOnly="True">
        <DataGrid.Columns>
          <DataGridTextColumn Header="File Name" Binding="{Binding FileName}" Width="*" />
          <DataGridTemplateColumn Header="Status" Width="200">
            <DataGridTemplateColumn.CellTemplate>
              <DataTemplate>
                <Panel>
                  <!-- Scanning -->
                  <StackPanel Orientation="Horizontal" Spacing="5" IsVisible="{Binding IsScanning}">
                    <ProgressBar IsIndeterminate="True" Width="20" Height="20" />
                    <TextBlock Text="Scanning..." VerticalAlignment="Center" />
                  </StackPanel>

                  <!-- Clean -->
                  <StackPanel Orientation="Horizontal" Spacing="5" IsVisible="{Binding IsClean}">
                    <PathIcon Data="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" Foreground="Green" />
                    <TextBlock Text="Clean" VerticalAlignment="Center" Foreground="Green" />
                  </StackPanel>

                  <!-- Compromised -->
                  <Button Click="OpenReport_Click" IsVisible="{Binding IsCompromised}" Padding="0" Background="Transparent" BorderThickness="0" Cursor="Hand">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                      <PathIcon Data="M20,8H17.19C16.74,7.22 16.12,6.55 15.37,6.04L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.49,5 12,5C11.51,5 11.04,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6.04C7.88,6.55 7.26,7.22 6.81,8H4V10H6.09C6.04,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.04,15.67 6.09,16H4V18H6.81C7.85,19.79 9.78,21 12,21C14.22,21 16.15,19.79 17.19,18H20V16H17.91C17.96,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.96,10.33 17.91,10H20V8M16,15H8V11H16V15Z" Foreground="Red" />
                      <TextBlock Text="{Binding StatusDisplay}" VerticalAlignment="Center" Foreground="Red" TextDecorations="Underline" />
                    </StackPanel>
                  </Button>

                  <!-- Other -->
                  <TextBlock Text="{Binding StatusDisplay}" VerticalAlignment="Center" IsVisible="{Binding IsOther}" />
                </Panel>
              </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
          </DataGridTemplateColumn>
        </DataGrid.Columns>
      </DataGrid>
    </Grid>
  </Grid>
</Window>
