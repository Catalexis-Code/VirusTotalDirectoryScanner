<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="VirusTotalDirectoryScanner.SettingsWindow"
        Title="Settings"
        WindowStartupLocation="CenterOwner"
        Width="720"
        Height="520">
  <Grid Margin="16" RowDefinitions="Auto,*,Auto" RowSpacing="12">
    <TextBlock FontSize="20" FontWeight="SemiBold" Text="Settings" />

    <TabControl Grid.Row="1">
      <TabItem Header="VirusTotal API">
        <ScrollViewer>
          <StackPanel Margin="8" Spacing="8">
            <TextBlock Text="API Key (stored in User Secrets)" FontWeight="SemiBold" />
            <Grid ColumnDefinitions="*,Auto">
              <TextBox x:Name="ApiKeyTextBox" Grid.Column="0" Text="{Binding ApiKey, Mode=TwoWay}" PasswordChar="{Binding ApiKeyPasswordChar}" Watermark="Enter your VirusTotal API key" />
              <Button Grid.Column="1" Margin="4,0,0,0" Click="ToggleApiKey_Click" Content="ðŸ‘" ToolTip.Tip="Toggle API Key Visibility" />
            </Grid>

            <Separator Margin="0,12" />

            <TextBlock Text="Requests per minute" FontWeight="SemiBold" />
            <NumericUpDown Value="{Binding QuotaPerMinute, Mode=TwoWay}" Minimum="0" />

            <TextBlock Text="Requests per day" FontWeight="SemiBold" Margin="0,8,0,0" />
            <NumericUpDown Value="{Binding QuotaPerDay, Mode=TwoWay}" Minimum="0" />

            <TextBlock Text="Requests per month" FontWeight="SemiBold" Margin="0,8,0,0" />
            <NumericUpDown Value="{Binding QuotaPerMonth, Mode=TwoWay}" Minimum="0" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <TabItem Header="Paths">
        <ScrollViewer>
          <StackPanel Margin="8" Spacing="8">
            <TextBlock Text="Scan directory" FontWeight="SemiBold" />
            <TextBox Text="{Binding ScanDirectory, Mode=TwoWay}" />

            <TextBlock Text="Clean directory" FontWeight="SemiBold" Margin="0,8,0,0" />
            <TextBox Text="{Binding CleanDirectory, Mode=TwoWay}" />

            <TextBlock Text="Compromised directory" FontWeight="SemiBold" Margin="0,8,0,0" />
            <TextBox Text="{Binding CompromisedDirectory, Mode=TwoWay}" />

            <TextBlock Text="Log file path" FontWeight="SemiBold" Margin="0,8,0,0" />
            <TextBox Text="{Binding LogFilePath, Mode=TwoWay}" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <TabItem Header="Settings Store">
        <ScrollViewer>
          <StackPanel Margin="8" Spacing="8">
            <TextBlock Text="User Secrets File" FontWeight="SemiBold" />
            <TextBlock Text="This file stores sensitive information like your API Key. It is stored in your user profile directory to keep it separate from the application code." TextWrapping="Wrap" FontSize="12" Foreground="Gray" />
            <TextBox Text="{Binding UserSecretsFilePath}" IsReadOnly="True" />

            <Separator Margin="0,12" />

            <TextBlock Text="User Settings File" FontWeight="SemiBold" />
            <TextBlock Text="This file stores your application preferences and configuration. It is stored in your local application data folder." TextWrapping="Wrap" FontSize="12" Foreground="Gray" />
            <TextBox Text="{Binding UserSettingsFilePath}" IsReadOnly="True" />
          </StackPanel>
        </ScrollViewer>
      </TabItem>
    </TabControl>

    <Grid Grid.Row="2" ColumnDefinitions="*,Auto,Auto" ColumnSpacing="8" VerticalAlignment="Center">
      <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" VerticalAlignment="Center" />
      <Button Grid.Column="1" Content="Cancel" Click="Cancel_Click" />
      <Button Grid.Column="2" Content="Save" IsDefault="True" Click="Save_Click" />
    </Grid>
  </Grid>
</Window>
